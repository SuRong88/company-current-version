(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c72f0"],{5010:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"publish"},[e("div",{staticClass:"title"},[t._v(t._s(t.cn?"编辑公司信息":"Modify Company Information"))]),e("div",{staticClass:"content-wrapper"},[e("ul",[e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"公司名称":"Name")+"：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:t.cn?"请输入公司名称":"Please enter Company Name"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"行业标签":"Industries")+"：")]),e("div",{staticClass:"content-box2"},[e("el-checkbox-group",{attrs:{min:0},model:{value:t.industryIndexs,callback:function(s){t.industryIndexs=s},expression:"industryIndexs"}},t._l(t.industryArr,(function(s,a){return e("el-checkbox",{key:s.company_type_id,attrs:{label:a}},[t._v(t._s(s.company_type_name))])})),1)],1)]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"企业类型":"Type")+"：")]),e("div",{staticClass:"content-box2"},[e("el-checkbox-group",{attrs:{min:0,max:1},model:{value:t.businessIndexs,callback:function(s){t.businessIndexs=s},expression:"businessIndexs"}},t._l(t.businessArr,(function(s,a){return e("el-checkbox",{key:s.company_type_id,attrs:{label:a}},[t._v(t._s(s.company_type_name))])})),1)],1)]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"地点":"Address")+"：")]),e("div",{staticClass:"mul-box"},[e("el-select",{staticClass:"select",attrs:{filterable:"","no-match-text":t.cn?"无匹配":"No match","no-data-text":t.cn?"无数据":"No data",placeholder:t.cn?"国家":"Country"},model:{value:t.countryIndex,callback:function(s){t.countryIndex=s},expression:"countryIndex"}},t._l(t.countryArr,(function(t,s){return e("el-option",{key:t.country_id,attrs:{label:t.country_name,value:s}})})),1),e("el-select",{staticClass:"select",attrs:{filterable:"","no-match-text":t.cn?"无匹配":"No match","no-data-text":t.cn?"无数据":"No data",placeholder:t.cn?"地区":"Region"},model:{value:t.regionIndex,callback:function(s){t.regionIndex=s},expression:"regionIndex"}},t._l(t.regionArr,(function(t,s){return e("el-option",{key:t.region_id,attrs:{label:t.region_name,value:s}})})),1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"input address",attrs:{type:"text",placeholder:t.cn?"请输入详细地址":"Please enter detailed address "},domProps:{value:t.address},on:{input:function(s){s.target.composing||(t.address=s.target.value)}}})],1)]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"成立时间":"Established On")+"：")]),e("div",{staticClass:"mul-box"},[e("el-select",{staticClass:"select",attrs:{filterable:"","no-match-text":t.cn?"无匹配":"No match","no-data-text":t.cn?"无数据":"No data",placeholder:t.cn?"年":"Year"},model:{value:t.year,callback:function(s){t.year=s},expression:"year"}},t._l(t.years,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1),e("el-select",{staticClass:"select",attrs:{filterable:"","no-match-text":t.cn?"无匹配":"No match","no-data-text":t.cn?"无数据":"No data",placeholder:t.cn?"月":"Month"},model:{value:t.month,callback:function(s){t.month=s},expression:"month"}},t._l(t.months,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"出售原因":"Selling Reasons")+"：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"input high",attrs:{placeholder:t.cn?"请输入出售原因":"Please enter Selling Reasons"},domProps:{value:t.reason},on:{input:function(s){s.target.composing||(t.reason=s.target.value)}}})]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"售价":"Price")+"：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"input",attrs:{type:"text",placeholder:t.cn?"请输入售价及币种":"Please enter Selling Price and Currency "},domProps:{value:t.price},on:{input:function(s){s.target.composing||(t.price=s.target.value)}}})]),e("li",[e("span",{staticClass:"label must"},[t._v(t._s(t.cn?"公司简介":"Profile")+"：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"input high",attrs:{placeholder:t.cn?"请输入公司简介":"Please enter Company Profile"},domProps:{value:t.desc},on:{input:function(s){s.target.composing||(t.desc=s.target.value)}}})]),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.cn?"经营范围":"Scope of Business")+"：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.scope,expression:"scope"}],staticClass:"input high",attrs:{placeholder:t.cn?"请输入经营范围":"Please enter Scope of Business"},domProps:{value:t.scope},on:{input:function(s){s.target.composing||(t.scope=s.target.value)}}})]),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.cn?"公司负债":"Company Debt")+"：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.debt,expression:"debt"}],staticClass:"input",attrs:{placeholder:t.cn?"请输入公司负债":"Please enter Company Debt"},domProps:{value:t.debt},on:{input:function(s){s.target.composing||(t.debt=s.target.value)}}})]),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.cn?"营业证明":"Business Certificate")+"：")]),e("div",{staticClass:"mul-box"},[t._l(t.license_imgs,(function(s,a){return e("div",{staticClass:"img-item"},[e("img",{staticClass:"img",attrs:{src:s.img_path}}),e("span",{staticClass:"remove-btn",on:{click:function(s){return t.delImg(a,"type1")}}})])})),e("div",{staticClass:"upload-btn img-item"},[e("input",{staticClass:"upload",attrs:{accept:"image/*",type:"file",value:""},on:{change:t.uploadImg01}})])],2)]),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.cn?"行业证书":"Industry Certificate")+"：")]),e("div",{staticClass:"mul-box"},[t._l(t.certificate_imgs,(function(s,a){return e("div",{staticClass:"img-item"},[e("img",{staticClass:"img",attrs:{src:s.img_path}}),e("span",{staticClass:"remove-btn",on:{click:function(s){return t.delImg(a,"type2")}}})])})),e("div",{staticClass:"upload-btn img-item"},[e("input",{staticClass:"upload",attrs:{accept:"image/*",type:"file",value:""},on:{change:t.uploadImg02}})])],2)]),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.cn?"公司照片":"Company photos")+"：")]),e("div",{staticClass:"mul-box"},[t._l(t.imgs,(function(s,a){return e("div",{staticClass:"img-item"},[e("img",{staticClass:"img",attrs:{src:s.img_path}}),e("span",{staticClass:"remove-btn",on:{click:function(s){return t.delImg(a,"type3")}}})])})),e("div",{staticClass:"upload-btn img-item"},[e("input",{staticClass:"upload",attrs:{accept:"image/*",type:"file",value:""},on:{change:t.uploadImg03}})])],2)]),e("li",[e("span",{staticClass:"label"},[t._v(t._s(t.cn?"公司收入":"Company Revenue")+"：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.income,expression:"income"}],staticClass:"input",attrs:{type:"text",placeholder:t.cn?"请输入公司收入":"Please enter Company Revenue"},domProps:{value:t.income},on:{input:function(s){s.target.composing||(t.income=s.target.value)}}})]),e("li",[e("span",{staticClass:"label"}),e("div",{staticClass:"content-box2 book-box"},[e("div",{staticClass:"box"}),e("span",{staticClass:"tip"},[t._v(t._s(t.cn?"注：带 * 号为必填选项":"Notes: * is required field"))])])])]),e("button",{staticClass:"btn btn-confirm",on:{click:t.submit}},[t._v(t._s(t.cn?"确认":"Submit"))])])])},i=[],n=e("6be6"),r=e.n(n);e("2427");const o=[];for(var l=(new Date).getFullYear(),c=l-1900,d=0;d<=c;d++)o.push(l--);const u=[1,2,3,4,5,6,7,8,9,10,11,12];var h={name:"publish",data(){return{company_id:"",name:"",address:"",reason:"",price:"",desc:"",scope:"",debt:"",income:"",industryArr:[],businessArr:[],industryIndexs:[],businessIndexs:[],countryArr:[],regionArr:[],countryIndex:null,regionIndex:null,country_id:"",country_name:"",region_id:"",region_name:"",years:o,months:u,year:"",month:"",business_type_lists:[],industry_type_lists:[],license_imgs:[],certificate_imgs:[],imgs:[]}},watch:{industryIndexs(){var t=[];this.industryIndexs.forEach(s=>{t.push(this.industryArr[s])}),this.industry_type_lists=t},businessIndexs(){var t=[];this.businessIndexs.forEach(s=>{t.push(this.businessArr[s])}),this.business_type_lists=t},countryIndex(){this.country_name=this.countryArr[this.countryIndex].country_name,this.country_id=this.countryArr[this.countryIndex].country_id,this.getRegion()},regionIndex(){this.region_name=this.regionArr[this.regionIndex].region_name,this.region_id=this.regionArr[this.regionIndex].region_id}},computed:{cn(){return"cn"==this.$store.state.language}},methods:{getCompanyInfo(){this.$get(urls.sellInfoDetail,{company_id:this.$route.query.company_id}).then(t=>{console.log(t.data),this.loadEnd(),this.company_id=t.data.company_id,this.name=t.data.company_name,this.address=t.data.place,this.year=t.data.life_year,this.month=t.data.life_month,this.reason=t.data.sell_reason,this.price=t.data.company_price,this.desc=t.data.descs,this.scope=t.data.scope,this.debt=t.data.debt,this.income=t.data.income,this.license_imgs=t.data.license_imgs,this.certificate_imgs=t.data.certificate_imgs,this.imgs=t.data.imgs,this.industryArr.forEach((s,e)=>{for(let a=0;a<t.data.industry_type_lists.length;a++)s["company_type_id"]==t.data.industry_type_lists[a]["company_type_id"]&&(console.log("yes"),this.industryIndexs.push(e))}),this.businessArr.forEach((s,e)=>{for(let a=0;a<t.data.business_type_lists.length;a++)s["company_type_id"]==t.data.business_type_lists[a]["company_type_id"]&&this.businessIndexs.push(e)}),this.countryArr.some((s,e)=>{if(s["country_id"]==t.data.country_id)return this.countryIndex=e,!0}),this.regionArr.some((s,e)=>{if(s["region_id"]==t.data.region_id)return this.regionIndex=e,!0;this.regionIndex=""})}).catch(t=>{console.log("失败"),this.loadEnd(),this.errorToast(t.data.msg)})},getIndustryArr(){return this.$get(urls.companyType,{parent_type:"industry"})},getBusinessArr(){return this.$get(urls.companyType,{parent_type:"business"})},getCountry(){return this.$get(urls.area,{country_id:0})},getRegion(){this.$get(urls.area,{country_id:this.country_id}).then(t=>{this.loadEnd(),this.regionArr=t.data.region,console.log(t)})},uploadImg01(t){const s=t.target.files||t.dataTransfer.files;let e=s[0];r()(e,{width:87}).then(t=>{console.log(t.base64),this.$post(urls.uploadImg,{name:"1",base64:t.base64}).then(s=>{this.loadEnd();var e=new Object;e.img_id=s.data.id,e.img_path=t.base64,this.license_imgs.push(e),console.log(e)}).catch(t=>{this.loadEnd(),this.cn?this.errorToast("上传失败 请重试"):this.errorToast("Upload failed,try again")})}).catch(t=>{this.cn?this.errorToast("转码失败 请重试"):this.errorToast("Convert failed,try again")}).always(()=>{})},uploadImg02(t){const s=t.target.files||t.dataTransfer.files;let e=s[0];r()(e,{width:87}).then(t=>{console.log(t.base64),this.$post(urls.uploadImg,{name:"1",base64:t.base64}).then(s=>{this.loadEnd();var e=new Object;e.img_id=s.data.id,e.img_path=t.base64,this.certificate_imgs.push(e),console.log(e)}).catch(t=>{this.loadEnd(),this.cn?this.errorToast("上传失败 请重试"):this.errorToast("Upload failed,try again")})}).catch(t=>{this.cn?this.errorToast("转码失败 请重试"):this.errorToast("Convert failed,try again")}).always(()=>{})},uploadImg03(t){const s=t.target.files||t.dataTransfer.files;let e=s[0];r()(e,{width:87}).then(t=>{console.log(t.base64),this.$post(urls.uploadImg,{name:"1",base64:t.base64}).then(s=>{this.loadEnd();var e=new Object;e.img_id=s.data.id,e.img_path=t.base64,this.imgs.push(e),console.log(e)}).catch(t=>{this.loadEnd(),this.cn?this.errorToast("上传失败 请重试"):this.errorToast("Upload failed,try again")})}).catch(t=>{this.cn?this.errorToast("转码失败 请重试"):this.errorToast("Convert failed,try again")})},delImg(t,s){switch(s){case"type1":this.license_imgs.splice(t,1);break;case"type2":this.certificate_imgs.splice(t,1);break;case"type3":this.imgs.splice(t,1);break}},submit(){return this.nullTest(this.name)?(this.cn?this.errorToast("请输入公司名称"):this.errorToast("Please enter company name"),!1):this.industryIndexs.length?this.businessIndexs.length?this.country_name?this.year?this.month?this.nullTest(this.reason)?(this.cn?this.errorToast("请输入出售原因"):this.errorToast("Please enter selling reason"),!1):this.nullTest(this.price)?(this.cn?this.errorToast("请输入售价"):this.errorToast("Please enter selling price"),!1):this.nullTest(this.desc)?(this.cn?this.errorToast("请输入公司简介"):this.errorToast("Please enter company profile"),!1):void this.$put(urls.sellInfoEdit,{company_id:this.company_id,company_name:this.name,business_type_lists:this.business_type_lists,industry_type_lists:this.industry_type_lists,country_id:this.country_id,country_name:this.country_name,region_id:this.region_id,region_name:this.region_name,place:this.address,life_year:this.year,life_month:this.month,sell_reason:this.reason,company_price:this.price,descs:this.desc,scope:this.scope,debt:this.debt,license_imgs:this.license_imgs,certificate_imgs:this.certificate_imgs,imgs:this.imgs,income:this.income}).then(t=>{this.loadEnd(),this.cn?this.successToast("修改成功"):this.successToast("Modified Successfully"),this.axiosAll([this.getIndustryArr(),this.getBusinessArr(),this.getCountry()]).then(t=>{console.log(t),this.loadEnd(),this.industryArr=t[0].data,this.businessArr=t[1].data,this.countryArr=t[2].data.country,this.getCompanyInfo()})}).catch(t=>{this.loadEnd(),this.errorToast(t.data.msg)}):(this.cn?this.errorToast("请选择成立月份"):this.errorToast("Please select the month of establishment"),!1):(this.cn?this.errorToast("请选择成立年份"):this.errorToast("Please select the year of establishment"),!1):(this.cn?this.errorToast("请选择国家"):this.errorToast("Please select the country"),!1):(this.cn?this.errorToast("请选择企业类型"):this.errorToast("Please select an enterprise type"),!1):(this.cn?this.errorToast("请选择行业标签"):this.errorToast("Please select industry labels"),!1)}},created(){this.axiosAll([this.getIndustryArr(),this.getBusinessArr(),this.getCountry()]).then(t=>{console.log(t),this.loadEnd(),this.industryArr=t[0].data,this.businessArr=t[1].data,this.countryArr=t[2].data.country,this.getCompanyInfo()})}},m=h,p=e("4e82"),g=Object(p["a"])(m,a,i,!1,null,null,null);s["default"]=g.exports}}]);